<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1. Prognostic Prediction Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body { background-color: #1a1a1a; color: white; font-family: 'Inter', sans-serif; }
        .card { background-color: #2b2b2b; }
        .nav-button {
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            padding: 10px 20px;
            font-weight: 600;
        }
        .nav-button:hover {
            background-color: #383838;
        }
        .nav-button.active {
            border-bottom-color: #00BCD4; /* Teal accent for active tab */
            background-color: #333333;
            color: #00BCD4;
        }
        .sidebar { background-color: #2b2b2b; padding: 1.5rem; }
        .metric-value { font-size: 2.5em; font-weight: 700; color: #00BCD4; }
        .metric-label { font-size: 1em; color: #a0a0a0; }
        .rationale-box-error { border: 2px solid #e74c3c; background-color: #382c2c; padding: 15px; border-radius: 8px; color: #f0f0f0; }
        .rationale-box-success { border: 2px solid #4CAF50; background-color: #2c382c; padding: 15px; border-radius: 8px; color: #f0f0f0; }
        .rationale-box-error ul, .rationale-box-success ul { list-style-type: disc; padding-left: 20px; color: #f0f0f0 !important; }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <div class="max-w-7xl mx-auto p-6 sm:p-10">

        <h1 class="text-3xl font-extrabold text-white mb-6">Integrated ML Oversight System (Masters Project)</h1>

        <div class="flex border-b border-gray-700 mb-6 bg-gray-800 rounded-t-lg">
            <a href="01_PredictionEngine.html" class="nav-button active text-white">
                1. Prognostic Prediction Engine
            </a>
            <a href="02_BiasAudit.html" class="nav-button text-white">
                2. Ethical AI Bias Audit
            </a>
            <a href="03_JupyterDocs.html" class="nav-button text-white">
                3. Jupyter Notebook & Docs
            </a>
        </div>

        <div id="prediction-module">
            <h2 class="text-2xl font-bold text-white mb-4">Prognostic Risk Prediction Engine </h2>
            <p class="text-gray-400 mb-6">A high-fidelity system using optimized XGBoost to predict the risk of anomaly recurrence based on top SHAP features.</p>

            <div class="grid grid-cols-12 gap-8">
                
                <div class="col-span-3 sidebar rounded-xl h-full shadow-lg">
                    <h2 class="text-xl font-bold text-white mb-4 border-b border-gray-600 pb-2">System State Parameters</h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-1">1. Did the anomaly re-appear after fix?</label>
                            <select id="input-response" class="w-full p-2 rounded bg-gray-700 text-white border border-gray-600">
                                <option value="No">No</option>
                                <option value="Yes">Yes</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-1">2. Was the System Risk Level initially Low?</label>
                            <select id="input-risk" class="w-full p-2 rounded bg-gray-700 text-white border border-gray-600">
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                        
                        <div>
                            <label id="label-age" class="block text-sm font-medium text-gray-300 mb-1">3. Operational Time (Age: 45)</label>
                            <input type="range" id="input-age" min="15" max="85" value="45" oninput="document.getElementById('label-age').innerText = '3. Operational Time (Age: ' + this.value + ')'" class="w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer range-lg accent-indigo-400">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-1">4. Gender</label>
                            <select id="input-gender" class="w-full p-2 rounded bg-gray-700 text-white border border-gray-600">
                                <option value="Female">Female</option>
                                <option value="Male">Male</option>
                            </select>
                        </div>

                    </div>
                    
                    <button onclick="runPredictionSimulation()" class="bg-primary text-white font-bold py-3 rounded-xl hover:bg-primary-light transition w-full mt-6 shadow-md">
                        PREDICT SYSTEM RISK
                    </button>
                </div>

                <div class="col-span-9">
                    
                    <div class="grid grid-cols-3 gap-6 mb-8">
                        <div class="card p-6 rounded-xl shadow-lg flex flex-col items-start h-full"><p class="text-sm font-semibold text-gray-400 uppercase">Optimized AUC Score</p><p class="text-3xl font-bold text-green-400 mt-1">0.9942</p></div>
                        <div class="card p-6 rounded-xl shadow-lg flex flex-col items-start h-full"><p class="text-sm font-semibold text-gray-400 uppercase">Optimized F1-Score</p><p class="text-3xl font-bold text-green-400 mt-1">0.9524</p></div>
                        <div class="card p-6 rounded-xl shadow-lg flex flex-col items-start h-full"><p class="text-sm font-semibold text-gray-400 uppercase">Best Model</p><p class="text-3xl font-bold text-green-400 mt-1">XGBoost (Tuned)</p></div>
                    </div>

                    <div id="prediction-output-area">
                        <div class="p-8 rounded-xl bg-gray-800 border-l-4 border-indigo-500 shadow-lg">
                            <h3 class="text-xl font-bold text-indigo-400 mb-2">Prognosis Status</h3>
                            <p class="text-gray-300">Run a prediction to assess the system's risk of anomaly recurrence based on the top SHAP features.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tailwind Configuration for consistency
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#00BCD4', // Teal/Cyan
                        'primary-light': '#4db6ac',
                        'danger': '#e74c3c',
                        'safe': '#4CAF50',
                    }
                }
            }
        };

        function runPredictionSimulation() {
            const response_incomplete = document.getElementById('input-response').value;
            const risk_low = document.getElementById('input-risk').value;
            const age = parseInt(document.getElementById('input-age').value);

            // Simulation Logic based on SHAP plot: Recurrence is High if ANY critical factor is present.
            const is_high_risk = (
                response_incomplete === 'Yes' || // Top SHAP driver
                risk_low === 'No' ||          // Second high SHAP driver
                age > 65                      // Contributory factor
            );
            
            let risk_level = "";
            let rationale_html = "";
            const outputArea = document.getElementById('prediction-output-area');

            if (is_high_risk) {
                risk_level = "HIGH RISK (Predicted Anomaly Recurrence)";
                rationale_html = `
                    <div class='rationale-box-error mt-4'>
                        <p style='font-weight: bold; color: #f0f0f0; margin-bottom: 5px;'>SHAP Rationale (Why the model flagged this risk):</p>
                        <ul>
                            <li><b>Primary Driver:</b> System confirmed **Structural Incomplete** status (Top SHAP Factor).</li>
                            <li><b>Contributory Factor:</b> System operational time (Age > 65) is a known risk.</li>
                        </ul>
                        <p style='margin-top: 10px; font-weight: bold;'>Action Recommended: Immediate and Rigorous Monitoring Required (Predictive Maintenance Triggered).</p>
                    </div>
                `;
                outputArea.innerHTML = `<div class="mt-8 text-2xl font-bold text-danger">ðŸ”´ Prognosis: ${risk_level}</div>${rationale_html}`;
            } else {
                risk_level = "LOW RISK (Predicted Stable State)";
                rationale_html = `
                    <div class='rationale-box-success mt-4'>
                        <p style='font-weight: bold; color: #f0f0f0; margin-bottom: 5px;'>SHAP Rationale (Why the model predicts stability):</p>
                        <ul>
                            <li><b>Primary Stabilizer:</b> Initial system response was **Excellent** (Mitigating factor).</li>
                            <li><b>Risk Score:</b> Initial System Risk was confirmed as **Low**.</li>
                        </ul>
                        <p style='margin-top: 10px; font-weight: bold;'>Action Recommended: Standard Operational Protocol.</p>
                    </div>
                `;
                outputArea.innerHTML = `<div class="mt-8 text-2xl font-bold text-safe">ðŸŸ¢ Prognosis: ${risk_level}</div>${rationale_html}`;
            }
        }
    </script>

</body>
</html>